(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{107:function(e,n,l){"use strict";l.r(n),n.default=l.p+"assets/images/page-config-cf4994bfd642037f215a59d055b30528.png"},145:function(e,n,l){"use strict";l.r(n),n.default=l.p+"assets/images/crm-list-raw-77a37606371d25bca5767c42d6d1bd08.png"},146:function(e,n,l){"use strict";l.r(n),n.default=l.p+"assets/images/crm-add-customer-43a92fab567816cd54b9d08fdfa96e46.png"},147:function(e,n,l){"use strict";l.r(n),n.default=l.p+"assets/images/crm-detail-raw-d52923b7db950e6b25f241cdde098389.png"},148:function(e,n,l){"use strict";l.r(n),n.default=l.p+"assets/images/crm-list-raw-2-d81bc42cc4ac23635b9ad43d01939a8d.png"},149:function(e,n,l){"use strict";l.r(n),n.default=l.p+"assets/images/config-all-5706fe508b98e373e56d7074e67e2be6.png"},70:function(e,n,l){"use strict";l.r(n),l.d(n,"frontMatter",(function(){return r})),l.d(n,"metadata",(function(){return i})),l.d(n,"rightToc",(function(){return s})),l.d(n,"default",(function(){return o}));var a=l(3),t=(l(0),l(95));const r={id:"crm",title:"\u793a\u4f8b\u5e94\u7528\uff1aCRM -- \u5ba2\u6237\u5173\u7cfb\u7ba1\u7406"},i={unversionedId:"crm",id:"crm",isDocsHomePage:!1,title:"\u793a\u4f8b\u5e94\u7528\uff1aCRM -- \u5ba2\u6237\u5173\u7cfb\u7ba1\u7406",description:"\u6211\u4eec\u901a\u8fc7\u505a\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684CRM\u6765\u4e86\u89e3lightning\u6846\u67b6\u7684\u57fa\u672c\u7528\u6cd5\u3002",source:"@site/docs/crm.md",slug:"/crm",permalink:"/docs/crm",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/crm.md",version:"current",sidebar:"someSidebar",previous:{title:"\u5feb\u901f\u5f00\u59cb",permalink:"/docs/start"}},s=[{value:"\u521b\u5efacrm\u5e94\u7528",id:"\u521b\u5efacrm\u5e94\u7528",children:[]},{value:"\u7f16\u5199\u4e1a\u52a1\u6a21\u578b",id:"\u7f16\u5199\u4e1a\u52a1\u6a21\u578b",children:[]},{value:"\u5e94\u7528\u6a21\u578b\u53d8\u66f4",id:"\u5e94\u7528\u6a21\u578b\u53d8\u66f4",children:[]},{value:"\u751f\u6210\u7ba1\u7406\u754c\u9762",id:"\u751f\u6210\u7ba1\u7406\u754c\u9762",children:[]},{value:"\u67e5\u770b\u751f\u6210\u7684\u7ba1\u7406\u754c\u9762",id:"\u67e5\u770b\u751f\u6210\u7684\u7ba1\u7406\u754c\u9762",children:[]},{value:"\u8c03\u51fa\u914d\u7f6e\u7ba1\u7406\u754c\u9762",id:"\u8c03\u51fa\u914d\u7f6e\u7ba1\u7406\u754c\u9762",children:[]},{value:"\u914d\u7f6e\u5ba2\u6237\u7ba1\u7406\u9875\u9762",id:"\u914d\u7f6e\u5ba2\u6237\u7ba1\u7406\u9875\u9762",children:[{value:"\u5217\u8868\u9875",id:"\u5217\u8868\u9875",children:[]},{value:"\u8be6\u60c5\u9875",id:"\u8be6\u60c5\u9875",children:[]}]},{value:"\u914d\u7f6e\u8054\u7cfb\u4eba\u9875\u9762",id:"\u914d\u7f6e\u8054\u7cfb\u4eba\u9875\u9762",children:[{value:"\u5217\u8868\u9875",id:"\u5217\u8868\u9875-1",children:[]},{value:"\u8868\u5355\u9875",id:"\u8868\u5355\u9875",children:[]}]},{value:"\u914d\u7f6e\u8ddf\u8fdb\u4eba\u9875\u9762",id:"\u914d\u7f6e\u8ddf\u8fdb\u4eba\u9875\u9762",children:[{value:"\u5217\u8868\u9875",id:"\u5217\u8868\u9875-2",children:[]},{value:"\u8868\u5355\u9875",id:"\u8868\u5355\u9875-1",children:[]}]}],d={rightToc:s};function o({components:e,...n}){return Object(t.b)("wrapper",Object(a.a)({},d,n,{components:e,mdxType:"MDXLayout"}),Object(t.b)("p",null,"\u6211\u4eec\u901a\u8fc7\u505a\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684CRM\u6765\u4e86\u89e3lightning\u6846\u67b6\u7684\u57fa\u672c\u7528\u6cd5\u3002"),Object(t.b)("p",null,"\u5728\u6b64\uff0c\u6211\u5047\u8bbe\u4f60\u5df2\u7ecf\u8ddf\u968f",Object(t.b)("a",Object(a.a)({parentName:"p"},{href:"start"}),"\u5feb\u901f\u5f00\u59cb"),"\u7684\u6307\u5f15\uff0c\u6210\u529f\u628alightning\u5e93\u5b89\u88c5\u5230\u4e86\u4f60\u7684\u9879\u76ee\u4e2d\u3002"),Object(t.b)("h2",{id:"\u521b\u5efacrm\u5e94\u7528"},"\u521b\u5efacrm\u5e94\u7528"),Object(t.b)("p",null,"\u901a\u8fc7django \u7684 startapp\u547d\u4ee4\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u540d\u4e3alightning_crm\u7684app\u3002"),Object(t.b)("pre",null,Object(t.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"$ ./manage.py startapp lightning_crm\n")),Object(t.b)("h2",{id:"\u7f16\u5199\u4e1a\u52a1\u6a21\u578b"},"\u7f16\u5199\u4e1a\u52a1\u6a21\u578b"),Object(t.b)("p",null,"\u4e3b\u8981\u4e1a\u52a1\u6a21\u578b\u6709\u4e09\u4e2a\uff1a"),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},"\u5ba2\u6237"),Object(t.b)("li",{parentName:"ol"},"\u8054\u7cfb\u4eba"),Object(t.b)("li",{parentName:"ol"},"\u8ddf\u8fdb")),Object(t.b)("p",null,"\u55ef\u3002\u53e6\u5916\u6709\u4e00\u4e2a\u56fe\u7247\u7684\u6570\u636e\u6a21\u578b"),Object(t.b)("p",null,"lightning_crm/models.py \u7684\u4ee3\u7801\u5982\u4e0b\uff1a"),Object(t.b)("pre",null,Object(t.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"from django.db import models\nfrom django.conf import settings\nfrom django.contrib.auth.models import User\n\nfrom api_basebone.core.fields import BoneImageUrlField\nfrom lightning.fields import ImageURLField\nfrom werkzeug import Local\n\n\nclass Image(models.Model):\n    url = ImageURLField('\u94fe\u63a5')\n    name = models.CharField('\u6587\u4ef6\u540d', max_length=200, null=True, blank=True)\n    create_time = models.DateTimeField('\u4e0a\u4f20\u65f6\u95f4', auto_now_add=True)\n    create_by = models.ForeignKey(settings.AUTH_USER_MODEL, models.SET_NULL, null=True, blank=True, verbose_name='\u4e0a\u4f20\u8005')\n\n    class Meta:\n        verbose_name = '\u56fe\u7247'\n        verbose_name_plural = '\u56fe\u7247'\n    \n    class GMeta:\n        title_field = 'name'\n        creator_field = 'create_by'\n\n\nclass AbstractCustomer(models.Model):\n    name = models.CharField('\u540d\u5b57', max_length=100)\n    description = models.CharField('\u7b80\u4ecb', max_length=1024, null=True, blank=True)\n    avatar = ImageURLField('\u5934\u50cf', blank=True, null=True)\n    is_organization = models.BooleanField('\u662f\u5426\u673a\u6784', default=False)\n    org_name = models.CharField('\u673a\u6784\u5168\u79f0', max_length=200, null=True, blank=True)\n    org_code = models.CharField('\u673a\u6784\u4ee3\u7801', max_length=200, null=True, blank=True)\n    phone = models.CharField('\u7535\u8bdd', max_length=20, null=True, blank=True)\n    address = models.CharField('\u5730\u5740', max_length=300, null=True, blank=True)\n    email = models.EmailField('\u90ae\u7bb1', max_length=100, null=True, blank=True)\n    weixin = models.CharField('\u5fae\u4fe1\u53f7', max_length=100, null=True, blank=True)\n    qq = models.CharField('QQ\u53f7', max_length=100, null=True, blank=True)\n    identity_code = models.CharField('\u8eab\u4efd\u8bc1\u53f7', max_length=100, null=True, blank=True)\n    stage = models.CharField('\u9636\u6bb5', max_length=20, choices=settings.LIGHTNING_CRM_CUSTOMER_STAGES, default='')\n    source = models.CharField('\u6e20\u9053\u6765\u6e90', max_length=100, choices=settings.LIGHTNING_CRM_CUSTOMER_SOURCE, default='')\n    referrer = models.ForeignKey('self', models.SET_NULL, null=True, blank=True, verbose_name='\u5f15\u8350\u5ba2\u6237')\n    follwer = models.ForeignKey(settings.AUTH_USER_MODEL, models.SET_NULL, null=True, blank=True, verbose_name='\u8ddf\u8fdb\u4eba', related_name='following_customers')\n\n    create_time = models.DateTimeField('\u521b\u5efa\u65f6\u95f4', auto_now_add=True)\n    update_time = models.DateTimeField('\u4fee\u6539\u65f6\u95f4', auto_now=True)\n    create_by = models.ForeignKey(settings.AUTH_USER_MODEL, models.SET_NULL, null=True, blank=True, verbose_name='\u521b\u5efa\u4eba', related_name='created_customers')\n\n    def __str__(self):\n        return self.name\n\n    class Meta:\n        abstract = True\n        verbose_name = '\u5ba2\u6237'\n        verbose_name_plural = '\u5ba2\u6237'\n\n    class GMeta:\n        title_field = 'name'\n        creator_field = 'create_by'\n\n\nclass Customer(AbstractCustomer):\n\n    class Meta(AbstractCustomer.Meta):\n        swappable = 'LIGHTNING_CRM_CUSTOMER_MODEL'\n\n\nclass Contact(models.Model):\n    customer = models.ForeignKey(settings.LIGHTNING_CRM_CUSTOMER_MODEL, models.SET_NULL, \n        null=True, blank=True, verbose_name='\u5ba2\u6237')\n    description = models.CharField('\u7b80\u4ecb', max_length=1024, null=True, blank=True)\n    name = models.CharField('\u540d\u5b57', max_length=100)\n    title = models.CharField('\u804c\u4f4d', max_length=100, null=True, blank=True)\n    avatar = ImageURLField('\u5934\u50cf', blank=True, null=True)\n    phone = models.CharField('\u7535\u8bdd', max_length=20, null=True, blank=True)\n    address = models.CharField('\u5730\u5740', max_length=300, null=True, blank=True)\n    email = models.EmailField('\u90ae\u7bb1', max_length=100, null=True, blank=True)\n    weixin = models.CharField('\u5fae\u4fe1\u53f7', max_length=100, null=True, blank=True)\n    qq = models.CharField('QQ\u53f7', max_length=100, null=True, blank=True)\n    identity_code = models.CharField('\u8eab\u4efd\u8bc1\u53f7', max_length=100, null=True, blank=True)\n\n    create_time = models.DateTimeField('\u521b\u5efa\u65f6\u95f4', auto_now_add=True)\n    create_by = models.ForeignKey(settings.AUTH_USER_MODEL, models.SET_NULL, null=True,\n        blank=True, verbose_name='\u521b\u5efa\u4eba')\n\n    class Meta:\n        verbose_name = '\u8054\u7cfb\u4eba'\n        verbose_name_plural = '\u8054\u7cfb\u4eba'\n    \n    class GMeta:\n        title_field = 'name'\n        creator_field = 'create_by'\n\n\nclass FollowUp(models.Model):\n    customer = models.ForeignKey(settings.LIGHTNING_CRM_CUSTOMER_MODEL, models.SET_NULL,\n        null=True, blank=True, verbose_name='\u5ba2\u6237')\n    action_type = models.CharField('\u8ddf\u8fdb\u7c7b\u578b', max_length=50, \n        choices=settings.LIGHTNING_CRM_FOLLOWUP_TYPE,default='')\n    content = models.TextField('\u8ddf\u8fdb\u5185\u5bb9', null=True, blank=True)\n    images = models.ManyToManyField(Image, blank=True, verbose_name='\u56fe\u7247')\n    contacts = models.ManyToManyField(Contact, blank=True, verbose_name='\u8054\u7cfb\u4eba')\n    follow_up_time = models.DateTimeField('\u521b\u5efa\u65f6\u95f4', auto_now_add=True)\n    follow_up_by = models.ForeignKey(settings.AUTH_USER_MODEL, models.SET_NULL,\n        null=True, blank=True, verbose_name='\u8ddf\u8fdb\u4eba')\n\n    class Meta:\n        verbose_name = '\u8ddf\u8fdb'\n        verbose_name_plural = '\u8ddf\u8fdb'\n\n    class GMeta:\n        creator_field = 'follow_up_by'\n")),Object(t.b)("h2",{id:"\u5e94\u7528\u6a21\u578b\u53d8\u66f4"},"\u5e94\u7528\u6a21\u578b\u53d8\u66f4"),Object(t.b)("p",null,"\u6267\u884cdjango\u7684migrate\u547d\u4ee4\uff0c\u4e3a\u51e0\u4e2a\u6a21\u578b\u521b\u5efa\u6570\u636e\u5e93\u8868\uff1a"),Object(t.b)("pre",null,Object(t.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"$ ./manage.py makemigrations\n$ ./manage.py migrate\n")),Object(t.b)("h2",{id:"\u751f\u6210\u7ba1\u7406\u754c\u9762"},"\u751f\u6210\u7ba1\u7406\u754c\u9762"),Object(t.b)("p",null,"\u6267\u884clight \u547d\u4ee4\uff0c\u4e3acrm\u5e94\u7528\u751f\u6210\u9ed8\u8ba4\u7684\u7ba1\u7406\u754c\u9762\uff1a"),Object(t.b)("pre",null,Object(t.b)("code",Object(a.a)({parentName:"pre"},{}),"$ ./manage.py light lightning_crm\n")),Object(t.b)("h2",{id:"\u67e5\u770b\u751f\u6210\u7684\u7ba1\u7406\u754c\u9762"},"\u67e5\u770b\u751f\u6210\u7684\u7ba1\u7406\u754c\u9762"),Object(t.b)("p",null,"\u6211\u4eec\u4ee5\u5ba2\u6237\u7ba1\u7406\u7684\u754c\u9762\u4e3a\u4f8b\uff0c\u770b\u4e00\u4e0blightning\u81ea\u52a8\u751f\u6210\u7684\u754c\u9762\uff1a"),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"\u5ba2\u6237\u5217\u8868\uff1a\n",Object(t.b)("img",{alt:"\u5ba2\u6237\u5217\u8868",src:l(145).default}))),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"\u6dfb\u52a0\u5ba2\u6237\n",Object(t.b)("img",{alt:"\u6dfb\u52a0\u5ba2\u6237",src:l(146).default}))),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"\u5ba2\u6237\u8be6\u60c5\n",Object(t.b)("img",{alt:"\u5ba2\u6237\u8be6\u60c5",src:l(147).default})))),Object(t.b)("h2",{id:"\u8c03\u51fa\u914d\u7f6e\u7ba1\u7406\u754c\u9762"},"\u8c03\u51fa\u914d\u7f6e\u7ba1\u7406\u754c\u9762"),Object(t.b)("p",null,"\u9ed8\u8ba4\u751f\u6210\u7684\u6837\u5b50\u5c1a\u7b97\u53ef\u7528\uff0c\u4e0b\u9762\u6211\u4eec\u52a8\u52a8\u624b\uff0c\u8ba9\u5ba2\u6237\u7ba1\u7406\u7684\u53ef\u7528\u6027\u66f4\u5f3a\uff0c\u9996\u5148\uff0c\u5728\u5ba2\u6237\u7ba1\u7406\u754c\u9762\uff0c\u6211\u4eec\u70b9\u51fb\u53f3\u4fa7\u7684\u9875\u9762\u914d\u7f6e\u6309\u94ae\uff0c\u5524\u51fa\u914d\u7f6e\u9762\u677f\u3002"),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},"\u70b9\u51fb\u9875\u9875\u914d\u7f6e\u6309\u94ae\uff1a")),Object(t.b)("p",null,Object(t.b)("img",{alt:"\u5ba2\u6237\u5217\u8868",src:l(148).default})),Object(t.b)("ol",{start:2},Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"\u5f39\u51fa\u914d\u7f6e\u754c\u9762\uff1a\n",Object(t.b)("img",{alt:"\u9875\u9762\u914d\u7f6e",src:l(107).default}))),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"\u6216\u8005\u4ece\u83dc\u5355\uff1a\u5f00\u53d1\u7ba1\u7406 -> \u9875\u9762\u914d\u7f6e \u6253\u5f00\u914d\u7f6e\u529f\u80fd\uff0c\u53ef\u5bf9\u6bcf\u4e2a\u6a21\u578b\u8fdb\u884c\u9875\u9762\u914d\u7f6e\uff1a\n",Object(t.b)("img",{alt:"\u9875\u9762\u914d\u7f6e",src:l(149).default})))),Object(t.b)("h2",{id:"\u914d\u7f6e\u5ba2\u6237\u7ba1\u7406\u9875\u9762"},"\u914d\u7f6e\u5ba2\u6237\u7ba1\u7406\u9875\u9762"),Object(t.b)("h3",{id:"\u5217\u8868\u9875"},"\u5217\u8868\u9875"),Object(t.b)("h3",{id:"\u8be6\u60c5\u9875"},"\u8be6\u60c5\u9875"),Object(t.b)("h2",{id:"\u914d\u7f6e\u8054\u7cfb\u4eba\u9875\u9762"},"\u914d\u7f6e\u8054\u7cfb\u4eba\u9875\u9762"),Object(t.b)("h3",{id:"\u5217\u8868\u9875-1"},"\u5217\u8868\u9875"),Object(t.b)("h3",{id:"\u8868\u5355\u9875"},"\u8868\u5355\u9875"),Object(t.b)("h2",{id:"\u914d\u7f6e\u8ddf\u8fdb\u4eba\u9875\u9762"},"\u914d\u7f6e\u8ddf\u8fdb\u4eba\u9875\u9762"),Object(t.b)("h3",{id:"\u5217\u8868\u9875-2"},"\u5217\u8868\u9875"),Object(t.b)("h3",{id:"\u8868\u5355\u9875-1"},"\u8868\u5355\u9875"))}o.isMDXComponent=!0}}]);